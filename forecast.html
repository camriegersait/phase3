<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <title>Forecast</title>
    <style>
    .apexcharts-zoom-icon svg {
    fill: #C4CAD0 !important;
    }

</style>
</head>

<!-- Forecast page (Cam):
- takes inputted statistics from receipts page (income, bills, other outcome sources, goals, etc.) and provides data visualization 
-->
<body style="background-color: #E7E8D5;" class="pt-12 pb-10">

<nav style="background-color: #344A17;" class="fixed top-0 left-0 right-0 z-50 border-gray-200 dark:bg-gray-900">
  <div class="h-12 max-w-screen-xl flex flex-wrap items-center content-center justify-between mx-auto p-4">
    <a class="mt-2 flex items-center space-x-3 rtl:space-x-reverse">
        <svg class="mb-2 w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
        <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 7V6a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-1M3 18v-7a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1Zm8-3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"/>
        </svg>
        <span class="mb-2 self-center text-xl font-semibold whitespace-nowrap dark:text-white">Prophet</span>
    </a>
    <a href="#" class="mt-2 block py-2 px-3 text-white rounded-sm md:bg-transparent md:text-blue-700 md:p-0 dark:text-white md:dark:text-blue-500" aria-current="page">
        <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"/>
        </svg>
    </a>
  </div>
</nav>


<div style="background-color: #84915D;" class="rounded-4xl p-2 m-6 justify-between content-center">
  
  <div class="relative flex h-full flex-col overflow-hidden">  
  <p class="m-4 w-full text-center text-center text-4xl font-semibold tracking-tight text-balance text-stone-800 sm:text-5xl">Daily Net Spending</p>
            
<div style="width:100%;" class="relative flex flex-col rounded-b-4xl">
  <div class="relative mx-4  flex flex-col gap-4 overflow-hidden rounded-none bg-transparent bg-clip-border text-gray-700 shadow-none md:flex-row md:items-center">
    <div class="w-max rounded-lg text-white">
    </div>
  </div>
  <div class="px-2 pb-0 rounded-4xl">
    <div id="bar-chart"></div>
  </div>
</div>

<div id="chart">
<script>

function generateYearlyData() {
    var dates = [];
    var startDate = new Date('2023-01-01');
    var endDate = new Date('2023-12-31');
    var currentDate = new Date(startDate);
    
    var currentValue = -40; // Start negative
    
    while (currentDate <= endDate) {
        var randomValue;
        var rand = Math.random();
        
        if (rand < 0.75) {
            // 75% chance: Negative values (-80 to 0)
            randomValue = Math.random() * -100;
        } else if (rand < 0.90) {
            // 15% chance: Lower negative values (-100 to -80)
            randomValue = -80 - (Math.random() * 20);
        } else if (rand < 0.099){
            // 10% chance: Positive values (0 to 30)
            randomValue = Math.random() * 100;
        }
        else {
          randomValue = Math.random() * 1000;
        }
        
        // Add some smoothness
        if (dates.length > 0) {
            var previousValue = dates[dates.length - 1][1];
            // 70% chance to stay somewhat close to previous value
            if (Math.random() < 0.7) {
                randomValue = previousValue + (Math.random() * 20 - 8);
                // Clamp to our desired ranges
                if (randomValue > 30) randomValue = 30;
                if (randomValue < -100) randomValue = -100;
            }
        }
        
        dates.push([currentDate.getTime(), parseFloat(randomValue.toFixed(1))]);
        currentDate.setDate(currentDate.getDate() + 1);
    }
    
    return dates;
}

  var dates = generateYearlyData();

var options = {
    series: [{
        name: 'User Spending',
        data: dates,
        color: '#C4CAD0'
    }],
    chart: {
        type: 'area',
        stacked: false,
        height: 350,
        zoom: {
            type: 'x',
            enabled: true,
            autoScaleYaxis: true
        },
        toolbar: {
            autoSelected: 'zoom'
        },
        events: {
            mounted: function(chartContext, config) {
                // Zoom to last 30 days when chart first loads
                var lastDate = dates[dates.length - 1][0];
                var thirtyDaysAgo = lastDate - (30 * 24 * 60 * 60 * 1000);
                chartContext.zoomX(thirtyDaysAgo, lastDate);
            }
        }
    },
    dataLabels: {
        enabled: false
    },
    markers: {
        size: 0,
    },
    fill: {
        type: 'gradient',
        gradient: {
            shadeIntensity: 1,
            inverseColors: false,
            opacityFrom: 0.5,
            opacityTo: 0,
            stops: [0, 90, 100]
        },
    },
    yaxis: {
        labels: {
            formatter: function (val) {
                return val.toFixed(0);
            },
        },
        title: {
            text: 'Money Spent'
        },
    },
    xaxis: {
        type: 'datetime',
        // Remove the range property from here
    },
    tooltip: {
        shared: false,
        y: {
            formatter: function (val) {
                return val.toFixed(2)
            }
        }
    }
};

var chart = new ApexCharts(document.querySelector("#chart"), options);
chart.render();
</script>
</div>
</div>
</div>

<div class="m-6 relative max-lg:row-start-3 lg:col-start-2 lg:row-start-2 rounded-4xl">
  <div class="absolute inset-px rounded-4xl"></div>
  <div style="background-color: #84915D;" class="relative flex h-full flex-col overflow-hidden rounded-4xl">
    <div class="px-8 pt-8 sm:px-10 sm:pt-10 text-center"> <!-- Added text-center here -->
      <p class="mt-2 text-lg font-medium tracking-tight text-white">Significant Statistics</p> <!-- Removed max-lg:text-center -->
      <p class="mt-2 text-sm/6 text-gray-800 mx-auto">Lets take a look at where you're headed and what you've done.</p> <!-- Removed max-lg:text-center and max-w-lg, added mx-auto -->
    </div>
    <div class="@container flex flex-1 items-center max-lg:py-6 lg:pb-2">
      <ul class="w-full space-y-1 text-white list-inside px-10 pb-3 text-center">
        <li class="flex items-center justify-center">
          <svg class="w-3.5 h-3.5 me-2 text-green-500 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
          </svg>
          Average Spending Over the Last Year: Down 5%
        </li>
        <li class="flex items-center justify-center">
          <svg class="w-3.5 h-3.5 me-2 text-green-500 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
          </svg>
          Net Savings Over the Last Year: $457
        </li>
        <li class="flex items-center justify-center">
          <svg class="w-3.5 h-3.5 me-2 text-red-500 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
          </svg>
          Significant Spending: Spent $680 This Month
        </li>
      </ul>
    </div>
  </div>
  <div class="pointer-events-none absolute inset-px rounded-lg outline outline-white/15"></div>
</div>

<div style="background-color: #84915D;" class="fixed bottom-0 left-0 z-50 w-full h-10 bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600 rounded-t-lg">
    <div class="grid h-full max-w-lg grid-cols-3 mx-auto font-medium">
        <a href="index.html" type="button" class="m-1 inline-flex flex-col items-center justify-center px-5 hover:bg-lime-950 group rounded-lg">
            <svg class="w-6 h-6 mb-0 text-stone-700 group-hover:text-stone-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="m4 12 8-8 8 8M6 10.5V19a1 1 0 0 0 1 1h3v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h3a1 1 0 0 0 1-1v-8.5"/>
            </svg>

        </a>
        <a type="button" class="m-1 inline-flex flex-col items-center justify-center px-5 hover:bg-lime-950 group rounded-lg">
            <svg class="w-6 h-6 mb-0 text-stone-700 group-hover:text-stone-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 4.5V19a1 1 0 0 0 1 1h15M7 14l4-4 4 4 5-5m0 0h-3.207M20 9v3.207"/>
            </svg>

        </button>
        <a href="receipts.html" type="button" class="m-1 inline-flex flex-col items-center justify-center px-5 hover:bg-lime-950 group rounded-lg">
            <svg class="w-6 h-6 mb-0 text-stone-700 group-hover:text-stone-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 8h6m-6 4h6m-6 4h6M6 3v18l2-2 2 2 2-2 2 2 2-2 2 2V3l-2 2-2-2-2 2-2-2-2 2-2-2Z"/>
            </svg>

        </a>
    </div>
</div>

</body>
</html>